!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(this,function(){"use strict";function r(r){var n=r.length>>1;if(4>n)return!0;for(var t=m(),e=m(),u=m(),i=m(),o=m(),f=0;n>f;f++){t.x=r[2*f],t.y=r[2*f+1],f==n-1?(e.x=r[0],e.y=r[1]):(e.x=r[2*f+2],e.y=r[2*f+3]);for(var x=0;n>x;x++)if(!(Math.abs(f-x)<2||x==n-1&&0==f||f==n-1&&0==x||(u.x=r[2*x],u.y=r[2*x+1],x==n-1?(i.x=r[0],i.y=r[1]):(i.x=r[2*x+2],i.y=r[2*x+3]),null==c(t,e,u,i,o))))return!1}return!0}function n(r){if(r.length<6)return!0;for(var n=r.length-4,t=0;n>t;t+=2)if(!p(r[t],r[t+1],r[t+2],r[t+3],r[t+4],r[t+5]))return!1;return p(r[n],r[n+1],r[n+2],r[n+3],r[0],r[1])&&p(r[n+2],r[n+3],r[0],r[1],r[2],r[3])?!0:!1}function t(r){if(r.length<6)return 0;for(var n=r.length-2,t=0,e=0;n>e;e+=2)t+=(r[e+2]-r[e])*(r[e+1]+r[e+3]);return t+=(r[0]-r[n])*(r[n+1]+r[1]),.5*-t}function e(r){for(var n=1/0,t=1/0,e=-n,u=-t,i=0;i<r.length;i+=2)n=Math.min(n,r[i]),e=Math.max(e,r[i]),t=Math.min(t,r[i+1]),u=Math.max(u,r[i+1]);return{x:n,y:t,width:e-n,height:u-t}}function u(r){for(var n=[],t=r.length-2;t>=0;t-=2)n.push(r[t],r[t+1]);return n}function i(r){var n=r.length>>1;if(3>n)return[];for(var t=[],e=[],u=0;n>u;u++)e.push(u);for(var u=0,i=n;i>3;){var o=e[(u+0)%i],f=e[(u+1)%i],x=e[(u+2)%i],a=r[2*o],l=r[2*o+1],y=r[2*f],s=r[2*f+1],h=r[2*x],d=r[2*x+1],c=!1;if(p(a,l,y,s,h,d)){c=!0;for(var g=0;i>g;g++){var m=e[g];if(m!=o&&m!=f&&m!=x&&v(r[2*m],r[2*m+1],a,l,y,s,h,d)){c=!1;break}}}if(c)t.push(o,f,x),e.splice((u+1)%i,1),i--,u=0;else if(u++>3*i)break}return t.push(e[0],e[1],e[2]),t}function o(r,n,t){for(var e,u=r.length>>1,i=r[2*u-3]-t,o=r[2*u-2]-n,f=r[2*u-1]-t,x=0;u>x;x++)if(e=o,i=f,o=r[2*x]-n,f=r[2*x+1]-t,i!==f)var a=f>i;for(var l=0,x=0;u>x;x++)if(e=o,i=f,o=r[2*x]-n,f=r[2*x+1]-t,!(0>i&&0>f||i>0&&f>0||0>e&&0>o)){if(i===f&&Math.min(e,o)<=0)return!0;if(i!==f){var y=e+(o-e)*-i/(f-i);if(0===y)return!0;y>0&&l++,0===i&&a&&f>i&&l--,0===i&&!a&&i>f&&l--,a=f>i}}return 1===(1&l)}function f(r,n,t,e,u){if(o(r,n,t)||o(r,e,u))return[r.slice(0)];for(var i=m(n,t),f=m(e,u),x=[],a=[],l=0;l<r.length;l+=2)a.push(m(r[l],r[l+1]));for(var l=0;l<a.length;l++){var y=m(0,0);y=c(i,f,a[l],a[(l+1)%a.length],y);var v=x[0],d=x[x.length-1];y&&(null==v||M(y,v)>1e-10)&&(null==d||M(y,d)>1e-10)&&(y.flag=!0,x.push(y),a.splice(l+1,0,y),l++)}if(x.length<2)return[r.slice(0)];var g=function(r,n){return M(i,r)-M(i,n)};x.sort(g);for(var p=[],b=0;x.length>0;){var O=x[0],k=x[1],A=a.indexOf(O),C=a.indexOf(k),S=!1;if(h(a,A)===C?S=!0:(O=x[1],k=x[0],A=a.indexOf(O),C=a.indexOf(k),h(a,A)===C&&(S=!0)),S){b--;var q=s(a,A,C);p.push(q),a=s(a,C,A),O.flag=k.flag=!1,x.splice(0,2),0==x.length&&p.push(a)}else b++,x.reverse();if(b>1)break}for(var B=[],l=0;l<p.length;l++){for(var G=p[l],I=[],P=0;P<G.length;P++)I.push(G[P].x,G[P].y);B.push(I)}return B}function x(r,n,t,e,u,i){var o=r.length-2,f=b(),x=f[0],a=f[1],l=f[2],s=f[3],h=f[4];x.x=n,x.y=t,a.x=n+e,a.y=t+u,(null===i||void 0===i)&&(i={dist:0,edge:0,norm:{x:0,y:0},refl:{x:0,y:0}}),i.dist=1/0;for(var v,c=0;o>c;c+=2)l.x=r[c],l.y=r[c+1],s.x=r[c+2],s.y=r[c+3],v=d(x,a,l,s,h),v&&(i=y(e,u,x,l,s,h,c/2,i));return l.x=s.x,l.y=s.y,s.x=r[0],s.y=r[1],v=d(x,a,l,s,h),v&&(i=y(e,u,x,l,s,h,r.length/2-1,i)),i.dist!==1/0?i:null}function a(r,n,t,e){var u=r.length-2,i=b(),o=i[0],f=i[2],x=i[3];o.x=n,o.y=t,null==e&&(e={dist:0,edge:0,point:{x:0,y:0},norm:{x:0,y:0}}),e.dist=1/0;for(var a=0;u>a;a+=2)f.x=r[a],f.y=r[a+1],x.x=r[a+2],x.y=r[a+3],e=l(o,f,x,a>>1,e);f.x=x.x,f.y=x.y,x.x=r[0],x.y=r[1],e=l(o,f,x,u>>1,e);var y=1/e.dist;return e.norm.x=(n-e.point.x)*y,e.norm.y=(t-e.point.y)*y,e}function l(r,n,t,e,u){var i,o,f=r.x,x=r.y,a=n.x,l=n.y,y=t.x,s=t.y,h=f-a,v=x-l,d=y-a,c=s-l,g=h*d+v*c,p=d*d+c*c,m=g/p;0>m||a==y&&l==s?(i=a,o=l):m>1?(i=y,o=s):(i=a+m*d,o=l+m*c);var M=f-i,b=x-o,O=Math.sqrt(M*M+b*b);return O<u.dist&&(u.dist=O,u.edge=e,u.point.x=i,u.point.y=o),u}function y(r,n,t,e,u,i,o,f){var x=M(t,i);if(x<f.dist){var a=1/M(e,u),l=-(u.y-e.y)*a,y=(u.x-e.x)*a,s=2*(r*l+n*y);f.dist=x,f.norm.x=l,f.norm.y=y,f.refl.x=-s*l+r,f.refl.y=-s*y+n,f.edge=o}return f}function s(r,n,t){var e=r.length,u=[];n>t&&(t+=e);for(var i=n;t>=i;i++)u.push(r[i%e]);return u}function h(r,n){for(var t=r.length;;)if(n=(n+1)%t,r[n].flag)return n}function v(r,n,t,e,u,i,o,f){var x=o-t,a=f-e,l=u-t,y=i-e,s=r-t,h=n-e,v=x*x+a*a,d=x*l+a*y,c=x*s+a*h,g=l*l+y*y,p=l*s+y*h,m=1/(v*g-d*d),M=(g*c-d*p)*m,b=(v*p-d*c)*m;return M>=0&&b>=0&&1>M+b}function d(r,n,t,e,u){var i=r.x-n.x,o=t.x-e.x,f=r.y-n.y,x=t.y-e.y,a=i*x-f*o;if(0==a)return null;var l=r.x*n.y-r.y*n.x,y=t.x*e.y-t.y*e.x,s=u,h=1/a;return s.x=(l*o-i*y)*h,s.y=(l*x-f*y)*h,g(s,t,e)?f>0&&s.y>r.y||0>f&&s.y<r.y?null:i>0&&s.x>r.x||0>i&&s.x<r.x?null:s:null}function c(r,n,t,e,u){var i=r.x-n.x,o=t.x-e.x,f=r.y-n.y,x=t.y-e.y,a=i*x-f*o;if(0===a)return null;var l=r.x*n.y-r.y*n.x,y=t.x*e.y-t.y*e.x,s=u;return s.x=(l*o-i*y)/a,s.y=(l*x-f*y)/a,g(s,r,n)&&g(s,t,e)?s:null}function g(r,n,t){var e=Math.min(n.x,t.x),u=Math.max(n.x,t.x),i=Math.min(n.y,t.y),o=Math.max(n.y,t.y);return e===u?i<=r.y&&r.y<=o:i===o?e<=r.x&&r.x<=u:e<=r.x+1e-10&&r.x-1e-10<=u&&i<=r.y+1e-10&&r.y-1e-10<=o}function p(r,n,t,e,u,i){return(n-e)*(u-t)+(t-r)*(i-e)>=0}function m(r,n){return{x:r,y:n,flag:!1,toString:function(){return"Point ["+r+", "+n+"]"}}}function M(r,n){var t=n.x-r.x,e=n.y-r.y;return Math.sqrt(t*t+e*e)}function b(r){r=r||10;for(var n=[],t=0;r>t;t++)n.push(m(0,0));return n}module.exports.IsSimple=r,module.exports.IsConvex=n,module.exports.GetArea=t,module.exports.GetAABB=e,module.exports.Reverse=u,module.exports.Triangulate=i,module.exports.ContainsPoint=o,module.exports.Slice=f,module.exports.Raycast=x,module.exports.ClosestEdge=a});